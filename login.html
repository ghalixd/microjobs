<!DOCTYPE html>
<html lang="en">
    <head>

        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Login</title>
        <link rel="stylesheet" href="css/style.css">
        <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Funnel+Display:wght@300..800&family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Work+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
        <script type="module" src="js/firebaseauth.js"></script>
        <!-- Add this in the <head> section -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
        <style>
            .bx-spin {
                animation: spin 1s linear infinite;
            }
            
            @keyframes spin {
                from {
                    transform: rotate(0deg);
                }
                to {
                    transform: rotate(360deg);
                }
            }
            
            button:disabled {
                opacity: 0.7;
                cursor: not-allowed;
            }
            #preloader {
                position: fixed;
                width: 100%;
                height: 100%;
                background: #fff;
                z-index: 9999;
                display: flex;
                justify-content: center;
                align-items: center;
            }
            
            .loader {
                width: 40px;
                height: 40px;
                border: 4px solid #f3f3f3;
                border-top: 4px solid #3498db;
                border-radius: 50%;
                animation: spin 1s linear infinite;
            }
        </style>
    </head>
<body>
    
    <div id="preloader">
        <div class="loader"></div>
    </div>
    

<header class="header">

    <section class="flex">

        <div id="menu-btn" class="fas fa-bars-staggered"></div>

        <a href="home.html" class="logo"><i class="fas fa-briefcase"></i> MicroJobs.</a>

        <nav class="navbar">
            <a href="home.html">home</a>
            <a href="about.html">about us</a>
            <a href="jobs.html">all jobs</a>
            <a href="contact.html">contact us</a>
            <a href="login.html">account</a>
            <a href="post_job.html">form</a>
        </nav>

        <a href="#" class="btn" style="margin-top: 0;">post job</a>
            

    </section>


</header>


<div class="login-container">
    <section class="container forms">
        <div class="form login">
            <div class="form-content">
                <header>Login</header>
                <form >
                    <div id="signInMessage" class="messageDiv" style="display: none;"></div>
                    <div class="field input-field">
                        <input type="mail" placeholder="Email" class="input" id="email">
                        <i class='bx bxs-envelope mail-icon'></i>
                    </div>
                    <div class="field input-field">
                        <input type="password" placeholder="Password" class="password" id="password">
                        <i class='bx bx-hide eye-icon' ></i>
                    </div>
                    <div class="field input-field">
                        <a href="#" class="forgot-pass" style="font-size: 15px;">Forgot password</a>
                    </div>
                    <div class="field button-field">
                        <button id="submitSignIn">Login</button>
                    </div>
                    <div class="form-link">
                        <span>Don't have an acount? <a href="#" class="sginup-link">Sign Up</a></span>
                    </div>
                </form>

            </div> 
            
            <div class="line"></div>
            <div class="media-options">
                <a href="" class="field facebook">
                    <i class='bx bxl-facebook facebook-icon'></i>
                    <span style="font-size: 15px;">Continue with Facebook </span>
                </a>
            </div>
            <div class="media-options">
                <a href="" class="field google">
                    <img src="images/google.webp" alt="" class="google-img"/>
                    <span style="font-size: 15px;">Continue with Google </span>
                </a>
            </div>
            <div class="media-options">
                <a href="" class="field linkedin">
                    <img src="images/linkedin.webp" alt="" class="linkedin-img"/>
                    <span style="font-size: 15px;">Continue with LinkedIn </span>
                </a>
            </div>


            
        </div>
        <div class="form signup">
            <div class="form-content">
                <header>Sign Up</header>
                <form action="#">
                    <div id="signUpMessage" class="messageDiv" style="display: none;"></div>
                    <div class="field input-field">
                        <input type="name" placeholder="Name" class="input" id="rname" >
                        <i class='bx bx-user user-icon'></i>
                    </div>
                    <div class="field input-field">
                        <input type="mail" placeholder="Email" class="input" id="remail">
                        <i class='bx bxs-envelope mail-icon'></i>
                    </div>
                    <div class="field input-field">
                        <input type="password" placeholder="Password" class="password" id="rpassword">
                        <i class='bx bx-hide eye-icon' ></i>
                    </div>
                    <div class="field input-field">
                        <input type="password" placeholder="Confirm Password" class="password" id="rpassword-confirm">
                        <i class='bx bx-hide eye-icon' ></i>
                    </div>
                   
                    <div class="field button-field">
                        <button id="submitSignUp">Sign Up</button>
                    </div>
                
                    <div class="form-link">
                        <span>Already have an account? <a href="#" class="login-link">Login</a></span>
                    </div>
                </form>

            </div> 

            
        </div>
    </section>
</div>


<script>



const loginForm = document.querySelector('.login form');
const signupForm = document.querySelector('.signup form');
const loginBtn = document.getElementById('submitSignIn');
const signupBtn = document.getElementById('submitSignUp');


function showNotification(message, type) {
    
    const notification = document.createElement('div');
    notification.style.position = 'fixed';
    notification.style.top = '20px';
    notification.style.right = '20px';
    notification.style.padding = '15px 25px';
    notification.style.borderRadius = '4px';
    notification.style.display = 'flex';
    notification.style.alignItems = 'center';
    notification.style.gap = '10px';
    notification.style.zIndex = '1000';
    notification.style.transition = 'all 0.3s ease';
    notification.style.transform = 'translateY(-100%)';
    notification.style.opacity = '0';

    // Set colors based on type
    if (type === 'success') {
        notification.style.backgroundColor = '#4CAF50';
        notification.style.color = 'white';
    } else {
        notification.style.backgroundColor = '#f44336';
        notification.style.color = 'white';
    }

    // Add icon and message
    notification.innerHTML = `
        <i class='bx ${type === 'success' ? 'bx-check-circle' : 'bx-x-circle'}'></i>
        <span>${message}</span>
    `;

    // Add to document
    document.body.appendChild(notification);

    // Show notification
    setTimeout(() => {
        notification.style.transform = 'translateY(0)';
        notification.style.opacity = '1';
    }, 100);

    // Remove after 3 seconds
    setTimeout(() => {
        notification.style.transform = 'translateY(-100%)';
        notification.style.opacity = '0';
        setTimeout(() => {
            notification.remove();
        }, 300);
    }, 3000);
}

// Function to handle form submission
async function handleFormSubmit(formType, email, password, name = '') {
    // Show loading
    const button = formType === 'login' ? loginBtn : signupBtn;
    const originalText = button.textContent;
    button.disabled = true;
    button.innerHTML = '<i class="bx bx-loader-alt bx-spin"></i> Loading...';

    try {
        // Simulate API call
        await new Promise(resolve => setTimeout(resolve, 1500));

        // Check if fields are empty
        if (formType === 'login' && (!email || !password)) {
            throw new Error('Please fill in all fields');
        }
        if (formType === 'signup' && (!email || !password || !name)) {
            throw new Error('Please fill in all fields');
        }

        // Show success message
        showNotification(
            formType === 'login' ? 'Login successful!' : 'Account created successfully!',
            'success'
        );

        // Redirect after successful login/signup (uncomment and modify path as needed)
        // setTimeout(() => {
        //     window.location.href = '/dashboard.html';
        // }, 1500);

    } catch (error) {
        showNotification(error.message, 'error');
    } finally {
        // Reset button
        button.disabled = false;
        button.textContent = originalText;
    }
}

// Add event listeners
if (loginBtn) {
    loginBtn.addEventListener('click', async (e) => {
        e.preventDefault();
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        await handleFormSubmit('login', email, password);
    });
}

if (signupBtn) {
    signupBtn.addEventListener('click', async (e) => {
        e.preventDefault();
        const name = document.getElementById('rname').value;
        const email = document.getElementById('remail').value;
        const password = document.getElementById('rpassword').value;
        await handleFormSubmit('signup', email, password, name);
    });
}

// Hide preloader when page loads
window.addEventListener('load', () => {
    const preloader = document.getElementById('preloader');
    if (preloader) {
        preloader.style.display = 'none';
    }
});
</script>

<footer class="footer">

    <section class="grid">

        <div class="box">
            <h3>quick links</h3>
            <a href="home.html"><i class="fas fa-angle-right"></i> home</a>
            <a href="about.html"><i class="fas fa-angle-right"> </i> about</a>
            <a href="jobs.html"><i class="fas fa-angle-right"> </i> all jobs</a>
            <a href="contact.html"><i class="fas fa-angle-right"> </i> contact</a>
            <a href="#"><i class="fas fa-angle-right"> </i> filter search</a>

        </div>

        <div class="box">
            <h3>extra links</h3>
            <a href="#"><i class="fas fa-angle-right"> </i> account</a>
            <a href="login.html"><i class="fas fa-angle-right"> </i> login</a>
            <a href="register.html"><i class="fas fa-angle-right"></i> register</a>
            <a href="#"><i class="fas fa-angle-right"> </i> post job</a>  
            <a href="#"><i class="fas fa-angle-right"> </i> dashboard</a>         
        </div>

        <div class="box">
            <h3>follow us</h3>
            <a href="#"><i class="fab fa-facebook-f"></i>  facebook</a>
            <a href="#"><i class="fab fa-twitter"></i>  twitter</a>
            <a href="#"><i class="fab fa-instagram"></i>  instagram</a>
            <a href="#"><i class="fab fa-linkedin"></i>  linkedin</a>
            <a href="#"><i class="fab fa-youtube"></i>  youtube</a>
        </div>



    </section>

    <div class="credit">&copy; copyright @ 2024 | all rights reserved!</div>

</footer>

<script src="js/script.js"></script>

</body>
</html>